{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _rangeCss = require('./range.css.js');\n\nvar _rangeCss2 = _interopRequireDefault(_rangeCss);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Slider = function (_Component) {\n  _inherits(Slider, _Component);\n\n  function Slider(props) {\n    _classCallCheck(this, Slider);\n\n    var _this = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this, props));\n\n    _this.state = {\n      value: _this.props.settings.start,\n      position: 0,\n      offset: 10,\n      precision: 0,\n      mouseDown: false\n    };\n    _this.determinePosition = _this.determinePosition.bind(_this);\n    _this.rangeMouseUp = _this.rangeMouseUp.bind(_this);\n    return _this;\n  }\n\n  _createClass(Slider, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.determinePrecision();\n      this.determinePosition(this.state.value);\n      window.addEventListener(\"mouseup\", this.rangeMouseUp);\n    }\n  }, {\n    key: 'determinePrecision',\n    value: function determinePrecision() {\n      var split = String(this.props.settings.step).split('.');\n      var decimalPlaces = void 0;\n\n      if (split.length == 2) {\n        decimalPlaces = split[1].length;\n      } else {\n        decimalPlaces = 0;\n      }\n\n      this.setState({\n        precision: Math.pow(10, decimalPlaces)\n      });\n    }\n  }, {\n    key: 'determineValue',\n    value: function determineValue(startPos, endPos, currentPos) {\n      var ratio = (currentPos - startPos) / (endPos - startPos);\n      var range = this.props.settings.max - this.props.settings.min;\n      var difference = Math.round(ratio * range / this.props.settings.step) * this.props.settings.step; // Use precision to avoid ugly Javascript floating point rounding issues\n      // (like 35 * .01 = 0.35000000000000003)\n\n      difference = Math.round(difference * this.state.precision) / this.state.precision;\n      return difference + this.props.settings.min;\n    }\n  }, {\n    key: 'determinePosition',\n    value: function determinePosition(value) {\n      var ratio = (value - this.props.settings.min) / (this.props.settings.max - this.props.settings.min);\n\n      var trackFillLeft = _reactDom2.default.findDOMNode(this.trackFill).getBoundingClientRect().left;\n\n      var innerLeft = _reactDom2.default.findDOMNode(this.inner).getBoundingClientRect().left;\n\n      var position = Math.round(ratio * this.inner.offsetWidth) + trackFillLeft - innerLeft - this.state.offset;\n      this.setState({\n        position: position\n      });\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(value, triggeredByUser) {\n      if (typeof triggeredByUser === 'undefined') {\n        triggeredByUser = true;\n      }\n\n      if (this.state.value !== value) {\n        /*if(this.props.settings.input) {\n            $(this.props.settings.input).val(value);\n        }*/\n        if (this.props.settings.onChange) {\n          this.props.settings.onChange(value, {\n            triggeredByUser: triggeredByUser\n          });\n        }\n\n        this.setState({\n          value: value\n        });\n      }\n    }\n  }, {\n    key: 'setValuePosition',\n    value: function setValuePosition(val, triggeredByUser) {\n      if (typeof triggeredByUser === 'undefined') {\n        triggeredByUser = true;\n      }\n\n      if (val <= this.props.settings.max && val >= this.props.settings.min) {\n        var position = this.determinePosition(val);\n        this.setValue(val, triggeredByUser);\n      }\n    }\n  }, {\n    key: 'setPosition',\n    value: function setPosition(val) {\n      this.setState({\n        position: val\n      });\n    }\n  }, {\n    key: 'rangeMouseDown',\n    value: function rangeMouseDown(isTouch, e) {\n      e.stopPropagation();\n\n      if (!this.props.disabled) {\n        e.preventDefault();\n        this.setState({\n          mouseDown: true\n        });\n\n        var innerBoundingClientRect = _reactDom2.default.findDOMNode(this.inner).getBoundingClientRect();\n\n        this.innerLeft = innerBoundingClientRect.left;\n        this.innerRight = this.innerLeft + this.inner.offsetWidth;\n        var pageX = void 0;\n        e.pageX ? pageX = e.pageX : console.log(\"PageX undefined\");\n        var value = this.determineValue(this.innerLeft, this.innerRight, pageX);\n\n        if (pageX >= this.innerLeft && pageX <= this.innerRight) {\n          if (value >= this.props.settings.min && value <= this.props.settings.max) {\n            if (this.props.discrete) {\n              this.setValuePosition(value, false);\n            } else {\n              this.setPosition(pageX - this.innerLeft - this.state.offset);\n              this.setValue(value);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'rangeMouseMove',\n    value: function rangeMouseMove(isTouch, e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (this.state.mouseDown) {\n        var pageX = void 0;\n        e.pageX ? pageX = e.pageX : console.log(\"PageX undefined\");\n        var value = this.determineValue(this.innerLeft, this.innerRight, pageX);\n\n        if (pageX >= this.innerLeft && pageX <= this.innerRight) {\n          if (value >= this.props.settings.min && value <= this.props.settings.max) {\n            if (this.props.discrete) {\n              this.setValuePosition(value, false);\n            } else {\n              this.setPosition(pageX - this.innerLeft - this.state.offset);\n              this.setValue(value);\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'rangeMouseUp',\n    value: function rangeMouseUp() {\n      this.setState({\n        mouseDown: false\n      });\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.inner = undefined;\n      this.innerLeft = undefined;\n      this.innerRight = undefined;\n      window.removeEventListener(\"mouseup\", this.rangeMouseUp);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.value !== this.state.value) {\n        this.setValuePosition(nextProps.value, true);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement('div', null, _react2.default.createElement('div', {\n        style: _extends({}, _rangeCss2.default.range, this.props.disabled ? _rangeCss2.default.disabled : {}, this.props.style),\n        onMouseDown: this.rangeMouseDown.bind(this, false),\n        onMouseMove: this.rangeMouseMove.bind(this, false),\n        onMouseUp: this.rangeMouseUp.bind(this, false),\n        onTouchStart: this.rangeMouseDown.bind(this, true)\n      }, _react2.default.createElement('div', {\n        className: 'semantic_ui_range_inner',\n        ref: function ref(inner) {\n          _this2.inner = inner;\n        },\n        style: _rangeCss2.default.inner\n      }, _react2.default.createElement('div', {\n        style: _extends({}, _rangeCss2.default.track, this.props.inverted ? _rangeCss2.default.invertedTrack : {})\n      }), _react2.default.createElement('div', {\n        ref: function ref(trackFill) {\n          _this2.trackFill = trackFill;\n        },\n        style: _extends({}, _rangeCss2.default.trackFill, this.props.inverted ? _rangeCss2.default.invertedTrackFill : {}, {\n          width: this.state.position + this.state.offset + \"px\"\n        }, _rangeCss2.default[this.props.inverted ? \"inverted-\" + this.props.color : this.props.color], this.props.disabled ? _rangeCss2.default.disabledTrackFill : {})\n      }), _react2.default.createElement('div', {\n        style: _extends({}, _rangeCss2.default.thumb, {\n          left: this.state.position + \"px\"\n        })\n      }))));\n    }\n  }]);\n\n  return Slider;\n}(_react.Component);\n\nexports.default = Slider;\nSlider.defaultProps = {\n  color: 'red',\n  settings: {\n    min: 0,\n    max: 10,\n    step: 1,\n    start: 0\n  }\n};\nSlider.propTypes = {\n  settings: _propTypes2.default.shape({\n    min: _propTypes2.default.number,\n    max: _propTypes2.default.number,\n    step: _propTypes2.default.number,\n    start: _propTypes2.default.number,\n    onChange: _propTypes2.default.func\n  }),\n  color: _propTypes2.default.string,\n  inverted: _propTypes2.default.bool\n};","map":null,"metadata":{},"sourceType":"script"}