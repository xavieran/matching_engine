{"ast":null,"code":"import _classCallCheck from \"/html/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/html/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/html/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/html/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/html/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/html/src/index.js\";\nimport ExchangeInterface from './exchange_interface.js';\nimport TraderInterface from './trader_interface.jsx';\nimport Login from './login_page.js';\nimport './index.css';\nimport Alert from 'react-bootstrap/Alert';\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport { Redirect } from 'react-router';\nimport { Route, BrowserRouter as Router } from 'react-router-dom';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nvar Root =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Root, _React$Component);\n\n  function Root(props) {\n    var _this;\n\n    _classCallCheck(this, Root);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Root).call(this, props));\n    _this.state = {\n      exchange_host: \"ws://le-chateaud:6789/\",\n      trader_id: null,\n      connected: null,\n      orderbook: {\n        bid: [],\n        ask: []\n      },\n      orders: [],\n      trades: [],\n      pnl: {}\n    };\n    return _this;\n  }\n\n  _createClass(Root, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(\"Mounted\");\n      this.exchange_interface = new ExchangeInterface(this.onopen.bind(this), this.onclose.bind(this), this.exchange_event.bind(this));\n      this.exchange_interface.connect(this.state.exchange_host);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      delete this.exchange_interface;\n    }\n  }, {\n    key: \"exchange_event\",\n    value: function exchange_event() {\n      console.log(\"Updating state\", this.exchange_interface);\n      this.setState({\n        exchange_host: this.exchange_host,\n        orderbook: this.exchange_interface.orderbook,\n        trades: this.exchange_interface.trades,\n        orders: this.exchange_interface.orders,\n        pnl: this.exchange_interface.pnl\n      });\n    }\n  }, {\n    key: \"onopen\",\n    value: function onopen(event) {\n      console.log(\"Received onopen\", event);\n      this.setState({\n        connected: true\n      });\n    }\n  }, {\n    key: \"onclose\",\n    value: function onclose(event) {\n      console.log(\"Received onclose\", event);\n      this.setState({\n        connected: false\n      });\n    }\n  }, {\n    key: \"connect\",\n    value: function connect() {\n      console.log(\"About to connect\");\n    }\n  }, {\n    key: \"send_order\",\n    value: function send_order(side, price, volume) {\n      this.exchange_interface.send_order(side, price, volume, this.state.trader_id);\n    }\n  }, {\n    key: \"send_cancel\",\n    value: function send_cancel(order_id) {\n      this.exchange_interface.send_cancel(order_id, this.state.trader_id);\n    }\n  }, {\n    key: \"login\",\n    value: function login(trader_id) {\n      console.log(\"Logging in as: \", trader_id);\n      this.exchange_interface.send_login(trader_id);\n      this.setState({\n        trader_id: trader_id\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Navbar, {\n        bg: \"light\",\n        expand: \"lg\",\n        fill: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Nav.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(Alert, {\n        variant: this.state.connected ? \"success\" : \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, this.state.connected ? \"Connected\" : \"Not connected\")), React.createElement(Nav.Link, {\n        href: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Nav.Link, {\n        href: \"monitor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Monitor\")), React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render(props) {\n          return React.createElement(Redirect, {\n            push: true,\n            to: \"/login\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/login\",\n        render: function render(props) {\n          return React.createElement(Login, {\n            login: _this2.login.bind(_this2),\n            connected: _this2.state.connected,\n            trader_id: _this2.state.trader_id,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/TraderInterface\",\n        render: function render(props) {\n          if (_this2.state.trader_id == null) {\n            return React.createElement(Redirect, {\n              push: true,\n              to: \"/\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109\n              },\n              __self: this\n            });\n          } else {\n            return React.createElement(TraderInterface, {\n              send_order: _this2.send_order.bind(_this2),\n              send_cancel: _this2.send_cancel.bind(_this2),\n              orderbook: _this2.state.orderbook,\n              orders: _this2.state.orders,\n              trades: _this2.state.trades,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 111\n              },\n              __self: this\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Root;\n}(React.Component);\n\nvar root = React.createElement(Root, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 125\n  },\n  __self: this\n});\nReactDOM.render(root, document.getElementById('root'));","map":{"version":3,"sources":["/html/src/index.js"],"names":["ExchangeInterface","TraderInterface","Login","Alert","Nav","Navbar","Redirect","Route","BrowserRouter","Router","React","ReactDOM","Root","props","state","exchange_host","trader_id","connected","orderbook","bid","ask","orders","trades","pnl","console","log","exchange_interface","onopen","bind","onclose","exchange_event","connect","setState","event","side","price","volume","send_order","order_id","send_cancel","send_login","login","Component","root","render","document","getElementById"],"mappings":"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","sourcesContent":["import ExchangeInterface from './exchange_interface.js';\nimport TraderInterface from './trader_interface.jsx';\nimport Login from './login_page.js';\nimport './index.css';\n\nimport Alert from 'react-bootstrap/Alert'\nimport Nav from 'react-bootstrap/Nav'\nimport Navbar from 'react-bootstrap/Navbar'\n\nimport { Redirect } from 'react-router';\nimport { Route, BrowserRouter as Router } from 'react-router-dom'\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n\nclass Root extends React.Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            exchange_host: \"ws://le-chateaud:6789/\",\n            trader_id: null,\n            connected: null, \n            orderbook: {\n                bid: [],\n                ask: []\n            },\n            orders: [],\n            trades: [],\n            pnl: {}\n        }\n    }\n\n    componentDidMount() {\n        console.log(\"Mounted\")\n        this.exchange_interface = new ExchangeInterface(\n            this.onopen.bind(this),\n            this.onclose.bind(this),\n            this.exchange_event.bind(this))\n\n        this.exchange_interface.connect(this.state.exchange_host)\n    }\n\n    componentWillUnmount() {\n        delete this.exchange_interface\n    }\n\n    exchange_event(){\n        console.log(\"Updating state\", this.exchange_interface)\n        this.setState({\n            exchange_host: this.exchange_host,\n            orderbook: this.exchange_interface.orderbook,\n            trades: this.exchange_interface.trades,\n            orders: this.exchange_interface.orders,\n            pnl: this.exchange_interface.pnl\n        })\n    }\n\n    onopen(event){\n        console.log(\"Received onopen\", event);\n        this.setState({connected: true})\n    }\n\n    onclose(event){\n        console.log(\"Received onclose\", event);\n        this.setState({connected: false})\n    }\n\n    connect(){\n        console.log(\"About to connect\");\n    }\n\n    send_order(side, price, volume){\n        this.exchange_interface.send_order(side, price, volume, this.state.trader_id) \n    }\n\n    send_cancel(order_id){\n        this.exchange_interface.send_cancel(order_id, this.state.trader_id)\n    }\n\n    login(trader_id)\n    {\n        console.log(\"Logging in as: \", trader_id)\n        this.exchange_interface.send_login(trader_id)\n        this.setState({trader_id: trader_id})\n    }\n\n    render(){\n        return (\n            <Router>\n              <div>\n                <Navbar bg=\"light\" expand=\"lg\" fill>\n                  <Nav.Item>\n                    <Alert variant={this.state.connected ? \"success\" : \"danger\" }>\n                      {this.state.connected ? \"Connected\" : \"Not connected\"}\n                    </Alert>\n                  </Nav.Item>\n                  <Nav.Link href=\"login\">Login</Nav.Link>\n                  <Nav.Link href=\"monitor\">Monitor</Nav.Link>\n                </Navbar>\n                <Route exact path=\"/\" render={props => <Redirect push to=\"/login\"/>}/>\n                <Route exact path=\"/login\" render={props => \n                  <Login \n                    login={this.login.bind(this)}\n                    connected={this.state.connected}\n                    trader_id={this.state.trader_id} />} />\n                <Route exact path=\"/TraderInterface\" render={props => {\n                  if (this.state.trader_id == null){\n                      return <Redirect push to=\"/\" />\n                  } else {\n                      return <TraderInterface\n                        send_order={this.send_order.bind(this)}\n                        send_cancel={this.send_cancel.bind(this)}\n                        orderbook={this.state.orderbook}\n                        orders={this.state.orders}\n                        trades={this.state.trades}/>\n                  }}}\n                />\n              </div>\n            </Router>\n        )\n    }\n}\n\nconst root = <Root/>\n\nReactDOM.render(root, document.getElementById('root'))\n"]},"metadata":{},"sourceType":"module"}